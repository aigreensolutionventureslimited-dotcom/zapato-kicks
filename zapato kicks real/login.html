<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vault Access | Zapato Kicks</title>
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@800&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #050505; --accent: #c5a059; --text: #ffffff; --error: #ff4444; }
        
        body { 
            font-family: 'Inter', sans-serif; 
            background: var(--bg); 
            color: var(--text); 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
        }

        .login-card { 
            background: #0f0f0f; 
            padding: 50px; 
            border-radius: 30px; 
            border: 1px solid rgba(255,255,255,0.05); 
            width: 100%; 
            max-width: 400px; 
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
        }

        h1 { 
            font-family: 'Syne', sans-serif; 
            text-transform: uppercase; 
            margin-bottom: 30px; 
            letter-spacing: 2px; 
            font-size: 2rem;
        }

        h1 span { color: var(--accent); }

        .input-group { margin-bottom: 15px; text-align: left; }

        input { 
            width: 100%; 
            padding: 15px; 
            background: #1a1a1a; 
            border: 1px solid #333; 
            color: white; 
            border-radius: 12px; 
            outline: none; 
            font-size: 1rem;
            transition: 0.3s;
        }

        input:focus { border-color: var(--accent); background: #222; }

        button { 
            width: 100%; 
            padding: 15px; 
            background: var(--accent); 
            border: none; 
            border-radius: 12px; 
            font-weight: 800; 
            cursor: pointer; 
            transition: 0.3s; 
            font-family: 'Syne', sans-serif;
            letter-spacing: 1px;
            margin-top: 10px;
        }

        button:hover { background: #fff; transform: translateY(-2px); }
        button:disabled { background: #444; cursor: not-allowed; transform: none; }

        #msg { 
            margin-top: 20px; 
            font-size: 0.85rem; 
            min-height: 1.2em;
        }

        .back-link {
            display: block;
            margin-top: 25px;
            color: #666;
            text-decoration: none;
            font-size: 0.8rem;
            transition: 0.3s;
        }

        .back-link:hover { color: var(--accent); }
    </style>
</head>
<body>
    <div class="login-card">
        <h1>Vault<span>Access</span></h1>
        
        <div class="input-group">
            <input type="email" id="email" placeholder="Admin Email" required>
        </div>
        
        <div class="input-group">
            <input type="password" id="password" placeholder="Password" required>
        </div>

        <button id="loginBtn" onclick="handleLogin()">ENTER VAULT</button>
        
        <div id="msg"></div>

        <a href="index.html" class="back-link">‚Üê Return to Storefront</a>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        // Use the credentials from your existing login configuration
        const SUPABASE_URL = 'https://rvfuenrggxverrnnmcet.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ2ZnVlbnJnZ3h2ZXJybm5tY2V0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4Njc2MTcsImV4cCI6MjA4MzQ0MzYxN30.aKCaWeXR1Le68waDqG_UHiOOZpkZYNC2FTTMutY-CqI';
        const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        async function handleLogin() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const msg = document.getElementById('msg');
            const btn = document.getElementById('loginBtn');

            if (!email || !password) {
                msg.style.color = "var(--error)";
                msg.innerText = "Please enter both email and password.";
                return;
            }

            // UI Feedback: Loading
            btn.disabled = true;
            btn.innerText = "AUTHENTICATING...";
            msg.innerText = "";

            try {
                const { data, error } = await _supabase.auth.signInWithPassword({ email, password });

                if (error) {
                    msg.style.color = "var(--error)";
                    msg.innerText = "Access Denied: " + error.message;
                    btn.disabled = false;
                    btn.innerText = "ENTER VAULT";
                } else {
                    msg.style.color = "var(--accent)";
                    msg.innerText = "Identity Verified. Opening Vault...";
                    // Smooth redirect to admin.html
                    setTimeout(() => {
                        window.location.href = "admin.html";
                    }, 1000);
                }
            } catch (err) {
                msg.style.color = "var(--error)";
                msg.innerText = "A connection error occurred.";
                btn.disabled = false;
                btn.innerText = "ENTER VAULT";
            }
        }

        // Allow "Enter" key to trigger login
        document.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleLogin();
        });
    </script>
</body>
</html>